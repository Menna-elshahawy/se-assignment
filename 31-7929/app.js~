//var express = require('express');
var path = require('path');
var app = express();
var db = require("./db");
var quotes = require("./quotes");


// view engine setup
app.set('views', path.join(__dirname, 'views'));
app.set('view engine', 'jade');

app.use(express.static(path.join(__dirname, 'public')));

 db.connect(function(err, db) {
    quotes.seed(function(err, seeded) {
      if(seeded==true){
        console.log("inserted");
      };
   });
  });
  
  app.get('', function(req, res) {
    res.render("./public/index.html");
  });
  
  app.get('/api/quote', function(req, res){
     quotes.getQuoteFromDB(function(err, quote) {
        res.send(quote);

     });
  });
  
  app.get('/api/quotes', function(req, res){
     quotes.getQuotesFromDB(function(err, quotes1) {
        res.send(quotes1);

     });
 	 //res.send(quotes.getQuotesFromDB());
  });

app.listen(8000, function() {
 		console.log("Listening on port 8000...");
 });

module.exports = app;
